<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Todo — Daily</title>
  <style>
    :root{--bg:#f7f7fb;--card:#ffffff;--accent:#4f46e5;--muted:#6b7280}
    *{box-sizing:border-box}
    body{font-family:Inter,Segoe UI,Roboto,system-ui,Arial;margin:0;background:var(--bg);color:#0f172a}
    .wrap{max-width:720px;margin:48px auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    h1{font-size:20px;margin:0}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 20px rgba(15,23,42,0.06)}

    form{display:flex;gap:8px}
    input[type=text]{flex:1;padding:10px 12px;border:1px solid #e6e9ef;border-radius:8px;font-size:15px}
    button.add{background:var(--accent);color:white;border:none;padding:10px 14px;border-radius:8px;font-weight:600;cursor:pointer}
    .controls{display:flex;gap:8px;align-items:center;margin-top:12px}
    .controls button{background:transparent;border:1px solid #e6e9ef;padding:6px 10px;border-radius:8px;cursor:pointer}

    ul.todos{list-style:none;padding:0;margin:14px 0 0}
    li.todo{display:flex;align-items:center;gap:12px;padding:10px;border-radius:8px;border:1px solid #f1f3f5;margin-bottom:8px}
    li.todo .title{flex:1}
    li.todo.completed .title{text-decoration:line-through;color:var(--muted)}
    .badge{font-size:12px;padding:6px 8px;border-radius:999px;border:1px solid #e6e9ef}

    .empty{padding:28px;text-align:center;color:var(--muted)}

    /* responsive */
    @media (max-width:480px){.wrap{margin:24px 12px;padding:12px}.card{padding:14px}h1{font-size:18px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Daily Todo</h1>
      <div class="badge">Simple • Local</div>
    </header>

    <section class="card">
      <form id="todoForm">
        <input id="todoInput" type="text" placeholder="Add a new task (press Enter or Add)" autocomplete="off">
        <button class="add" type="submit">Add</button>
      </form>

      <div class="controls">
        <button id="clearCompleted" type="button">Clear completed</button>
        <button id="clearAll" type="button">Clear all</button>
        <div style="margin-left:auto;color:var(--muted);font-size:13px">Double-click title to edit</div>
      </div>

      <ul id="todoList" class="todos" aria-live="polite"></ul>
      <div id="empty" class="empty" style="display:none">No tasks yet — add something to get started ✨</div>
    </section>
  </div>

  <script>
    // Simple Todo app with localStorage persistence
    const form = document.getElementById('todoForm');
    const input = document.getElementById('todoInput');
    const list = document.getElementById('todoList');
    const empty = document.getElementById('empty');
    const clearCompleted = document.getElementById('clearCompleted');
    const clearAll = document.getElementById('clearAll');

    let todos = JSON.parse(localStorage.getItem('simple-todos') || '[]');

    function save(){ localStorage.setItem('simple-todos', JSON.stringify(todos)); }

    function render(){
      list.innerHTML = '';
      if(todos.length === 0){ empty.style.display = 'block'; return } else { empty.style.display = 'none' }

      todos.forEach((t, idx) => {
        const li = document.createElement('li');
        li.className = 'todo' + (t.done ? ' completed' : '');

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = t.done;
        checkbox.addEventListener('change', () => { todos[idx].done = checkbox.checked; save(); render(); });

        const title = document.createElement('div');
        title.className = 'title';
        title.textContent = t.text;
        title.title = 'Double-click to edit';
        title.addEventListener('dblclick', () => editTask(idx, title));

        const meta = document.createElement('div');
        meta.style.display = 'flex';
        meta.style.gap = '8px';
        meta.style.alignItems = 'center';

        const date = document.createElement('div');
        date.className = 'muted';
        date.style.fontSize='12px';
        date.style.color='#9ca3af';
        date.textContent = formatDate(t.createdAt);

        const del = document.createElement('button');
        del.textContent = 'Delete';
        del.addEventListener('click', () => { todos.splice(idx,1); save(); render(); });

        meta.appendChild(date);
        meta.appendChild(del);

        li.appendChild(checkbox);
        li.appendChild(title);
        li.appendChild(meta);
        list.appendChild(li);
      })
    }

    function formatDate(ts){
      try{ const d = new Date(ts); return d.toLocaleDateString() + ' ' + d.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});}catch(e){return ''}
    }

    function addTask(text){
      const trimmed = text.trim();
      if(!trimmed) return;
      todos.unshift({text:trimmed, done:false, createdAt: Date.now()});
      save(); render();
    }

    function editTask(idx, titleEl){
      const current = todos[idx].text;
      const input = document.createElement('input');
      input.type='text'; input.value = current; input.style.width = '100%'; input.style.fontSize = '15px';
      titleEl.replaceWith(input);
      input.focus();
      input.setSelectionRange(current.length, current.length);

      function commit(){
        const v = input.value.trim();
        if(v) todos[idx].text = v; else todos.splice(idx,1);
        save(); render();
      }

      input.addEventListener('blur', commit);
      input.addEventListener('keydown', (e) => { if(e.key === 'Enter') { input.blur() } if(e.key === 'Escape'){ render() } });
    }

    form.addEventListener('submit', (e)=>{ e.preventDefault(); addTask(input.value); input.value=''; input.focus(); });
    clearCompleted.addEventListener('click', ()=>{ todos = todos.filter(t=>!t.done); save(); render(); });
    clearAll.addEventListener('click', ()=>{ if(confirm('Clear ALL tasks?')){ todos = []; save(); render(); } });

    // initial render
    render();
  </script>
</body>
</html>
